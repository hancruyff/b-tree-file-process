# ğŸŒ³ B+ Tree File Processing System

**C++ë¡œ êµ¬í˜„í•œ ë””ìŠ¤í¬ ê¸°ë°˜ B+ íŠ¸ë¦¬ ì‚½ì…/ì‚­ì œ/ê²€ìƒ‰ ì‹œìŠ¤í…œ**  
íŒŒì¼ ë‹¨ìœ„ë¡œ ë…¸ë“œë¥¼ ì €ì¥/ë¡œë“œí•˜ë©°, B+ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íš¨ìœ¨ì ì¸ ê²€ìƒ‰ê³¼ ë°ì´í„° ì‚½ì…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

---

## ğŸ“‚ ëª©ì°¨

- [1. ê°œìš”](#1-ê°œìš”)
- [2. B+ íŠ¸ë¦¬ë€?](#2-b-íŠ¸ë¦¬ë€)
- [3. í”„ë¡œì íŠ¸ êµ¬ì¡°](#3-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [4. ê¸°ëŠ¥ ì„¤ëª…](#4-ê¸°ëŠ¥-ì„¤ëª…)
- [5. ì£¼ìš” ì½”ë“œ êµ¬ì„±](#5-ì£¼ìš”-ì½”ë“œ-êµ¬ì„±)
- [6. ì‹¤í–‰ ë°©ë²•](#6-ì‹¤í–‰-ë°©ë²•)
- [7. ê¸°ìˆ  ìŠ¤íƒ](#7-ê¸°ìˆ -ìŠ¤íƒ)

---

## 1. ğŸ“Œ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” **íŒŒì¼ ê¸°ë°˜ B+ íŠ¸ë¦¬ ì¸ë±ìŠ¤ êµ¬ì¡°**ë¥¼ ì§ì ‘ êµ¬í˜„í•œ C++ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.  
`ì‚½ì…`, `ì‚­ì œ`, `íƒìƒ‰`, `ë¦¬í”„ ë…¸ë“œ ì—°ê²°`, `ë””ìŠ¤í¬ ì €ì¥ ë° ë²„í¼ ê´€ë¦¬`ê¹Œì§€ í¬í•¨ëœ **ê°„ë‹¨í•œ DB ì¸ë±ì‹± ì‹œìŠ¤í…œì˜ í•µì‹¬ ë¡œì§**ì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.

---

## 2. ğŸŒ² B+ íŠ¸ë¦¬ë€?

**B+ íŠ¸ë¦¬(B+ Tree)** ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ë””ìŠ¤í¬ì— ì €ì¥í•˜ë©° ê²€ìƒ‰í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ëŒ€í‘œì ì¸ **ê· í˜• ì¸ë±ìŠ¤ íŠ¸ë¦¬ êµ¬ì¡°**ì…ë‹ˆë‹¤.

- ëª¨ë“  ë°ì´í„°ëŠ” **ë¦¬í”„ ë…¸ë“œ**ì—ë§Œ ì €ì¥ë¨
- **ë¦¬í”„ ë…¸ë“œë“¤ì€ í¬ì¸í„°ë¡œ ì—°ê²°**ë˜ì–´ ìˆì–´ ë²”ìœ„ ê²€ìƒ‰ì´ ë¹ ë¦„
- **ì‚½ì…/ì‚­ì œ ì‹œ ìë™ ê· í˜• ìœ ì§€**
- íŒŒì¼ ì‹œìŠ¤í…œ, DBMSì—ì„œ **ì¸ë±ìŠ¤ êµ¬ì¡°**ë¡œ ë„ë¦¬ ì‚¬ìš©

> ì´ í”„ë¡œì íŠ¸ëŠ” B+ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ êµ¬í˜„í•˜ê³ , ê·¸ ë…¸ë“œë¥¼ ë””ìŠ¤í¬ íŒŒì¼ì— ì €ì¥í•˜ì—¬ ì…ì¶œë ¥ íš¨ìœ¨ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ëª©ì ì…ë‹ˆë‹¤.

---

## 3. ğŸ§± í”„ë¡œì íŠ¸ êµ¬ì¡°
```
b+ íŠ¸ë¦¬/
â”œâ”€â”€ BTree.cpp / BTree.h           â†’ íŠ¸ë¦¬ ì „ì²´ í´ë˜ìŠ¤ (ì‚½ì…, ì‚­ì œ, íƒìƒ‰ ë“±)
â”œâ”€â”€ BTreeInsert.cpp               â†’ ì‚½ì… ë¡œì§ ë¶„ë¦¬ êµ¬í˜„
â”œâ”€â”€ BTreeDelete.cpp               â†’ ì‚­ì œ ë¡œì§ ë¶„ë¦¬ êµ¬í˜„
â”œâ”€â”€ BTreeRetrieve.cpp             â†’ í‚¤ ê²€ìƒ‰ ë¡œì§
â”œâ”€â”€ BTreePage.cpp / BTreePage.h   â†’ í˜ì´ì§€ êµ¬ì¡° (ë…¸ë“œ í‘œí˜„)
â”œâ”€â”€ BufferManager.cpp / .h        â†’ íŒŒì¼ IO / í˜ì´ì§€ ìºì‹± ì²˜ë¦¬
â”œâ”€â”€ BaseHeader.h                  â†’ ê³µí†µ ìƒìˆ˜ ë° íƒ€ì… ì •ì˜
â”œâ”€â”€ BTreeMain.cpp                 â†’ main í•¨ìˆ˜ ë° ë©”ë‰´ êµ¬ì„±
â”œâ”€â”€ data.txt                      â†’ ì €ì¥ë  ë ˆì½”ë“œ íŒŒì¼
â”œâ”€â”€ backup.txt                    â†’ íŠ¸ë¦¬ ë³µì‚¬ ë°±ì—…
```

---

## 4. ğŸ”§ ê¸°ëŠ¥ ì„¤ëª…

| ê¸°ëŠ¥          | ì„¤ëª… |
|---------------|------|
| í‚¤ ì‚½ì…       | ìƒˆë¡œìš´ í‚¤ë¥¼ ì‚½ì…í•˜ë©° ë…¸ë“œ ë¶„í•  ë° ë¶€ëª¨ ê°±ì‹  ì²˜ë¦¬ |
| í‚¤ ì‚­ì œ       | ì‚­ì œ í›„ underflow ë°œìƒ ì‹œ ë³‘í•© ë˜ëŠ” ì°¨ìš© ì²˜ë¦¬ |
| í‚¤ ê²€ìƒ‰       | íŠ¸ë¦¬ë¥¼ íƒ€ê³  ë‚´ë ¤ê°€ì„œ ë¦¬í”„ ë…¸ë“œì—ì„œ í‚¤ íƒìƒ‰ ìˆ˜í–‰ |
| ë²”ìœ„ ê²€ìƒ‰     | ë¦¬í”„ ë…¸ë“œ ì—°ê²° í¬ì¸í„°ë¥¼ ì´ìš©í•´ ì—°ì†ì ì¸ ê°’ íƒìƒ‰ |
| íŒŒì¼ ì…ì¶œë ¥   | ê° í˜ì´ì§€(ë…¸ë“œ)ë¥¼ íŒŒì¼ë¡œ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ì²˜ë¦¬ |
| ë²„í¼ ë§¤ë‹ˆì €   | ìì£¼ ì ‘ê·¼ë˜ëŠ” í˜ì´ì§€ë¥¼ ìºì‹œì— ìœ ì§€í•˜ì—¬ ë””ìŠ¤í¬ ì ‘ê·¼ ìµœì†Œí™” |

---

## 5. ğŸ” ì£¼ìš” ì½”ë“œ êµ¬ì„±

### B+ íŠ¸ë¦¬ ì‚½ì…

```cpp
void BTree::Insert(int key, int recordOffset) {
    PageId rootPid = header->rootPageId;
    KeyType promotedKey;
    PageId newChildPid;
    
    // ì¬ê·€ ì‚½ì… â†’ ë¶„í•  ë°œìƒ ì‹œ ë¶€ëª¨ì—ê²Œ ìŠ¹ê²©
    bool split = InsertInternal(rootPid, key, recordOffset, promotedKey, newChildPid);

    if (split) {
        // ìƒˆ ë£¨íŠ¸ ìƒì„±
        PageId newRoot = AllocatePage();
        InternalPage root(newRoot, true);
        root.Init();
        root.Insert(promotedKey, rootPid);
        root.SetRightMostPageId(newChildPid);
        header->rootPageId = newRoot;
        WriteHeader();
    }
}
```

### í‚¤ ê²€ìƒ‰
```cpp
bool BTree::Search(int key, RecordId &rid) {
    PageId current = header->rootPageId;
    while (!IsLeaf(current)) {
        InternalPage page(current);
        current = page.LookupChild(key);
    }
    LeafPage leaf(current);
    return leaf.Lookup(key, rid);
}
```

ë…¸ë“œ êµ¬ì¡° ì •ì˜ (BTreePage.h)
```cpp
struct LeafPage {
    int keys[MAX];
    int values[MAX];   // ë ˆì½”ë“œ ìœ„ì¹˜
    int nextPageId;    // ë‹¤ìŒ ë¦¬í”„ ë…¸ë“œ í¬ì¸í„°
};

struct InternalPage {
    int keys[MAX];
    int children[MAX + 1]; // ìì‹ ë…¸ë“œ í˜ì´ì§€ ID
};
```

### 6. ğŸ›  ê¸°ìˆ  ìŠ¤íƒ
<img src="https://img.shields.io/badge/C++-00599C?style=for-the-badge&logo=c%2B%2B&logoColor=white"/> <img src="https://img.shields.io/badge/Windows%20API-0078D7?style=for-the-badge&logo=windows&logoColor=white"/> <img src="https://img.shields.io/badge/File%20IO-%231970D6?style=for-the-badge"/>

C++: ì „ë°˜ì ì¸ ì•Œê³ ë¦¬ì¦˜ ë° êµ¬ì¡° êµ¬í˜„

íŒŒì¼ ì…ì¶œë ¥ (fstream): í˜ì´ì§€ ë‹¨ìœ„ ì €ì¥ ë° ë¶ˆëŸ¬ì˜¤ê¸°

ë²„í¼ ë§¤ë‹ˆì €: í˜ì´ì§€ ìºì‹œ ë° ìµœì†Œí•œì˜ ë””ìŠ¤í¬ ì ‘ê·¼ì„ ìœ„í•œ ë¡œì§ í¬í•¨

ë°ì´í„° ì¸ë±ì‹±: ì§ì ‘ êµ¬í˜„í•œ B+ Treeë¥¼ í†µí•´ ì •ë ¬ ë° íƒìƒ‰

### 7. ğŸ“Œ í•™ìŠµ í¬ì¸íŠ¸

âœ”ï¸ íŠ¸ë¦¬ êµ¬ì¡° ì¬ê·€ì  ì„¤ê³„ ë° ë…¸ë“œ ë¶„í• /ë³‘í•© ì²˜ë¦¬

âœ”ï¸ ë””ìŠ¤í¬ ê¸°ë°˜ ìë£Œêµ¬ì¡° ì²˜ë¦¬ ë°©ì‹ ì´í•´

âœ”ï¸ Leaf ë…¸ë“œì˜ LinkedList êµ¬ì¡°ë¡œ ë²”ìœ„ ê²€ìƒ‰ êµ¬í˜„

âœ”ï¸ ë²„í¼ ê´€ë¦¬ ë° í˜ì´ì§€ êµì²´ ì „ëµ ì„¤ê³„ ê²½í—˜
